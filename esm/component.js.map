{"version":3,"sources":["../src/component.js"],"names":["generateComputed","obj","ret","Object","keys","forEach","key","v","get","set","bindMethods","ctx","methods","bind","bindWatch","watch","$watch","LIFECYCLE_HOOKS","RGEX_EVENT","initListeners","ctxs","props","listeners","addListener","handler","push","name","prototype","match","eventName","ReactVueLike","observer","_props","target","mixins","isRoot","_isVueLike","_isVueLikeRoot","Boolean","_type","_ticks","_provides","_injects","$refs","$parent","$root","$children","_renderFn","render","$listeners","$emit","_data","_computed","_methods","_watch","data","assign","call","computed","provide","inject","includes","$data","_deeps","_shadows","startsWith","deep","pMethods","getOwnPropertyNames","filter","map","parent","injects","getProvides","vm","provides","length","p","_provide","i","undefined","$set","splice","e","idx","findIndex","c","handlers","args","err","info","cb","expOrFn","callback","options","change","newValue","oldValue","immediate","expr","value","payload","_callListener","$off","prevProps","prevState","_reactInternalFiber","_resolveParent","_resolveInject","snapshot","ticks","slice","_resolveDestory","error","plugin","install","Error","config","m","React","Component","optionMergeStrategies","ReactHook","_createElement","createElement","propTypes"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { extendObservable, observe, when, set, remove } from 'mobx';\nimport { observer } from 'mobx-react';\nimport { parseExpr, camelize, isFunction, iterativeParent, handleError, defComputed } from './utils';\nimport config from './config';\nimport propcheck from './prop-check';\n\nfunction generateComputed(obj) {\n  const ret = {};\n\n  Object.keys(obj).forEach(key => {\n    const v = obj[key];\n    if (isFunction(v)) return defComputed(ret, key, v);\n    defComputed(ret, key, v.get, v.set);\n  });\n  return ret;\n}\n\nfunction bindMethods(ctx, methods) {\n  methods && Object.keys(methods).forEach(key => ctx[key] = (methods[key].bind(ctx)));\n}\n\nfunction bindWatch(ctx, watch) {\n  if (!watch) return;\n  Object.keys(watch).forEach(key => ctx.$watch(key, watch[key]));\n}\n\nconst LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed',\n  'errorCaptured'\n];\n\nconst RGEX_EVENT = /on([A-Z]\\w+)/;\n// const RGEX_SYNC = /^(\\w+)\\$sync$/;\n\nfunction initListeners(ctxs, props) {\n  let listeners = {};\n  const addListener = (key, handler) => {\n    if (!listeners[key]) listeners[key] = [];\n    listeners[key].push(handler);\n  };\n  ctxs.forEach(ctx => {\n    LIFECYCLE_HOOKS.forEach(key => {\n      const name = `hook:${key}`;\n      let handler = ctx[key];\n      if (!handler && ctx.prototype && ctx.prototype[key]) handler = ctx.prototype[key];\n      if (handler) addListener(name, handler);\n    });\n  });\n  if (props) {\n    Object.keys(props).forEach(key => {\n      const handler = props[key];\n      if (!handler) return;\n      let [, eventName] = key.match(RGEX_EVENT) || [];\n      if (eventName) addListener(camelize(eventName), handler);\n    });\n  }\n  return listeners;\n}\n\n@observer\nclass ReactVueLike extends React.Component {\n  constructor(_props) {\n    super(_props);\n\n    const target = new.target;\n    const { mixins, isRoot } = target;\n\n    this._isVueLike = true;\n    this._isVueLikeRoot = Boolean(isRoot);\n    this._type = target;\n    this._ticks = [];\n    this._provides = [];\n    this._injects = [];\n    this.$refs = {};\n    this.$parent = null;\n    this.$root = null;\n    this.$children = [];\n\n    this._renderFn = this.render;\n    this.render = ReactVueLike.prototype.render;\n\n\n    const ctxs = mixins ? [...ReactVueLike.mixins, ...mixins, target] : [...ReactVueLike.mixins, target];\n    this.$listeners = initListeners(ctxs, _props);\n\n    this.$emit('hook:beforeCreate', _props);\n\n    let _data = {};\n    let _computed = {};\n    let _methods = {};\n    let _watch = {};\n    ctxs.forEach(ctx => {\n      if (ctx.data) Object.assign(_data, ctx.data.call(this, _props));\n      if (ctx.computed) Object.assign(_computed, ctx.computed);\n      if (ctx.methods) Object.assign(_methods, ctx.methods);\n      if (ctx.watch) Object.assign(_watch, ctx.watch);\n      if (ctx.provide) this._provides.push(ctx.provide);\n      if (ctx.inject) ctx.inject.forEach(key => !this._injects.includes(key) && this._injects.push(key));\n    });\n\n    this.$data = _data;\n    let _deeps = {};\n    let _shadows = {};\n    Object.keys(_data).forEach(key => {\n      if (key.startsWith('_')) _shadows[key] = _data[key];\n      else _deeps[key] = _data[key];\n    });\n    extendObservable(this, _deeps, {}, { deep: true });\n    extendObservable(this, _shadows, {}, { deep: false });\n\n    extendObservable(this, generateComputed(_computed));\n\n    bindMethods(this, _methods);\n    const pMethods = {};\n    Object.getOwnPropertyNames(target.prototype)\n      .filter(key => ReactVueLike.prototype[key])\n      .map(key => isFunction(this[key]) && (pMethods[key] = this[key]));\n    bindMethods(this, pMethods);\n\n    bindWatch(this, _watch);\n\n    this.$emit('hook:created');\n    this.$emit('hook:beforeMount');\n  }\n\n  _resolveParent() {\n    iterativeParent(this, parent => this.$parent = parent, ReactVueLike);\n    this.$root = this.$parent ? this.$parent.$root : this;\n    if (this.$parent) this.$parent.$children.push(this);\n  }\n\n  _resolveInject() {\n    try {\n      const injects = this._injects;\n      const getProvides = vm => {\n        const provides = vm && vm._provides;\n        if (!provides || !provides.length) return;\n        let ret = {};\n        provides.forEach(p => Object.assign(ret, isFunction(p) ? p.call(vm) : p));\n        return ret;\n      };\n      if (injects.length) {\n        iterativeParent(this, vm => {\n          let _provide = getProvides(vm);\n          if (_provide) {\n            for (let i = injects.length - 1; i; i--) {\n              let key = injects[i];\n              let v = _provide[key];\n              if (v !== undefined) {\n                this.$set(this, key, v);\n                injects.splice(i, 1);\n              }\n            }\n          }\n          return !injects.length;\n        }, ReactVueLike);\n      }\n    } catch (e) {\n      handleError(e, this, 'resolveInject');\n      throw e;\n    }\n  }\n\n  _resolveDestory() {\n    if (this.$parent) {\n      const idx = this.$parent.$children.findIndex(c => c === this);\n      if (~idx) this.$parent.$children.splice(idx, 1);\n    }\n  }\n\n  async _callListener(eventName, handlers, args) {\n    try {\n      if (!handlers) return;\n      if (isFunction(handlers)) return await handlers.call(this, ...args);\n      let ret;\n      for (let handler of handlers) {\n        ret = await handler.call(this, ...args);\n      }\n      return ret;\n    } catch (e) {\n      handleError(e, this, `$emit:${eventName}`);\n      throw e;\n    }\n  }\n\n  static use(plugin, options = {}) {\n    if (!plugin.install) throw Error('ReactVueLike.use error: plugin need has \\'install\\' method!');\n    plugin.install(ReactVueLike, options);\n  }\n\n  static config(options = {}) {\n    Object.assign(config, options);\n  }\n\n  static mixin(m) {\n    if (!m) return;\n    ReactVueLike.mixins.push(m);\n  }\n\n  static props = {\n\n  }\n\n  static mixins = [];\n\n  static data(props) {\n    return {};\n  }\n\n  static provide() {\n\n  }\n\n  static inject = [];\n\n  static computed = {\n\n  }\n\n  static watch = {\n\n  }\n\n  static methods = {\n\n  }\n\n  beforeCreate(props = {}) {\n\n  }\n\n  created() {\n\n  }\n\n  beforeMount(props = {}) {\n\n  }\n\n  mounted() {\n\n  }\n\n  beforeUpdate() {\n  }\n\n  updated() {\n\n  }\n\n  beforeDestory() {\n\n  }\n\n  errorCaptured(err, vm, info) {\n\n  }\n\n  $nextTick(cb, ctx) {\n    this._ticks.push(ctx ? cb.bind(ctx) : cb);\n  }\n\n  $watch(expOrFn, callback, options = {}) {\n    if (!expOrFn || !callback) return;\n    callback = callback.bind(this);\n    if (typeof expOrFn === 'string') {\n      let { obj, key } = parseExpr(this, expOrFn);\n      if (obj && key)  {\n        return observe(\n          obj,\n          key,\n          change => callback(change.newValue, change.oldValue),\n          options.immediate\n        );\n      }\n    } else if (isFunction(expOrFn)) {\n      let oldValue;\n      return when(() => oldValue !== expOrFn(), callback);\n    }\n  }\n\n  $set(target, expr, value) {\n    let { obj, key } = parseExpr(target, expr);\n    if (obj && key) set(obj, key, value);\n  }\n\n  $delete(target, expr) {\n    let { obj, key } = parseExpr(target, expr);\n    if (obj && key) remove(obj, key);\n  }\n\n  $emit(eventName, ...payload) {\n    eventName = camelize(eventName);\n    return this._callListener(eventName, this.$listeners[eventName], payload);\n  }\n\n  $on(eventName, handler) {\n    eventName = camelize(eventName);\n    if (!this.$listeners[eventName]) this.$listeners[eventName] = [];\n    this.$listeners[eventName].push(handler.bind(this));\n  }\n\n  $off(eventName, handler) {\n    eventName = camelize(eventName);\n    if (handler) {\n      const handlers = this.$listeners[eventName];\n      if (handlers) {\n        const idx = handlers.findIndex(v => v === handler);\n        if (~idx) handlers.splice(idx, 1);\n      }\n      return;\n    }\n    delete this.$listeners[eventName];\n  }\n\n  $once(eventName, handler) {\n    eventName = camelize(eventName);\n    this.$listeners[eventName] = (...payload) => {\n      this.$off(eventName, handler);\n      return handler.call(this, ...payload);\n    };\n  }\n\n  render(...args) {\n    return this._renderFn && this._renderFn(...args);\n  }\n\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    this.$emit('hook:beforeUpdate');\n    return null;\n  }\n\n  componentDidMount() {\n    if (this._reactInternalFiber) {\n      this._resolveParent();\n      this._resolveInject();\n    }\n\n    this.$emit('hook:mounted');\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    this.$emit('hook:updated');\n\n    if (this._ticks.length) {\n      const ticks = this._ticks.slice();\n      this._ticks = [];\n      ticks.forEach(v => v());\n    }\n  }\n\n  componentWillUnmount() {\n    this.$emit('hook:beforeDestory');\n    this._resolveDestory();\n  }\n\n  componentDidCatch(error, info) {\n    this.$emit('hook:errorCaptured', error, this, info);\n  }\n}\n\nReactVueLike.config.optionMergeStrategies = {\n\n};\n\nReactVueLike.Component = ReactVueLike;\n\nfunction ReactHook() {\n  const _createElement = React.createElement;\n  React.createElement = function createElement(Component, ...args) {\n    if (typeof Component === 'string') return _createElement.call(this, Component, ...args);\n\n    if (Component\n        && Component.props\n        // eslint-disable-next-line\n        && !Component.propTypes\n        && (Component.prototype instanceof ReactVueLike)) {\n      Component = propcheck(Component);\n    }\n    return _createElement.call(this, Component, ...args);\n  };\n}\n\nReactHook();\n\nexport default ReactVueLike;\n"],"file":"component.js"}