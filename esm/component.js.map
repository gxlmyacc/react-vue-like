{"version":3,"sources":["../src/component.js"],"names":["generateComputed","obj","ret","Object","keys","forEach","key","v","get","set","bindMethods","ctx","methods","bind","bindWatch","watch","$watch","LIFECYCLE_HOOKS","RGEX_EVENT","initListeners","ctxs","props","listeners","addListener","handler","push","name","prototype","match","eventName","ReactVueLike","observer","_props","target","mixins","_isVueLike","_type","_ticks","_provides","_injects","$refs","$parent","$root","$children","_renderFn","render","$listeners","$emit","_data","_computed","_methods","_watch","data","assign","call","computed","provide","inject","includes","$data","pMethods","getOwnPropertyNames","filter","map","parent","injects","getProvides","vm","provides","length","p","_provide","i","undefined","$set","splice","e","idx","findIndex","c","handlers","args","err","info","cb","expOrFn","callback","options","change","newValue","oldValue","immediate","expr","value","payload","_callListener","$off","prevProps","prevState","_reactInternalFiber","_resolveParent","_resolveInject","snapshot","ticks","slice","_resolveDestory","error","plugin","install","Error","config","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { extendObservable, observe, when, set, remove } from 'mobx';\nimport { observer } from 'mobx-react';\nimport { parseExpr, camelize, isFunction, iterativeParent, handleError, defComputed } from './utils';\nimport config from './config';\n\nfunction generateComputed(obj) {\n  const ret = {};\n\n  Object.keys(obj).forEach(key => {\n    const v = obj[key];\n    if (isFunction(v)) return defComputed(ret, key, v);\n    defComputed(ret, key, v.get, v.set);\n  });\n  return ret;\n}\n\nfunction bindMethods(ctx, methods) {\n  methods && Object.keys(methods).forEach(key => ctx[key] = (methods[key].bind(ctx)));\n}\n\nfunction bindWatch(ctx, watch) {\n  if (!watch) return;\n  Object.keys(watch).forEach(key => ctx.$watch(key, watch[key]));\n}\n\nconst LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed',\n  'errorCaptured'\n];\n\nconst RGEX_EVENT = /on([A-Z]\\w+)/;\n// const RGEX_SYNC = /^(\\w+)\\$sync$/;\n\nfunction initListeners(ctxs, props) {\n  let listeners = {};\n  const addListener = (key, handler) => {\n    if (!listeners[key]) listeners[key] = [];\n    listeners[key].push(handler);\n  };\n  ctxs.forEach(ctx => {\n    LIFECYCLE_HOOKS.forEach(key => {\n      const name = `hook:${key}`;\n      let handler = ctx[key];\n      if (!handler && ctx.prototype && ctx.prototype[key]) handler = ctx.prototype[key];\n      if (handler) addListener(name, handler);\n    });\n  });\n  if (props) {\n    Object.keys(props).forEach(key => {\n      const handler = props[key];\n      if (!handler) return;\n      let [, eventName] = key.match(RGEX_EVENT) || [];\n      if (eventName) addListener(camelize(eventName), handler);\n    });\n  }\n  return listeners;\n}\n\n@observer\nclass ReactVueLike extends React.Component {\n  constructor(_props) {\n    super(_props);\n\n    const target = new.target;\n    const { mixins } = target;\n\n    this._isVueLike = true;\n    this._type = target;\n    this._ticks = [];\n    this._provides = [];\n    this._injects = [];\n    this.$refs = {};\n    this.$parent = null;\n    this.$root = null;\n    this.$children = [];\n\n    this._renderFn = this.render;\n    this.render = ReactVueLike.prototype.render;\n\n    const ctxs = mixins ? [...mixins, target] : [target];\n    this.$listeners = initListeners(ctxs, _props);\n\n    this.$emit('hook:beforeCreate', _props);\n\n    let _data = {};\n    let _computed = {};\n    let _methods = {};\n    let _watch = {};\n    ctxs.forEach(ctx => {\n      if (ctx.data) Object.assign(_data, ctx.data.call(this, _props));\n      if (ctx.computed) Object.assign(_computed, ctx.computed);\n      if (ctx.methods) Object.assign(_methods, ctx.methods);\n      if (ctx.watch) Object.assign(_watch, ctx.watch);\n      if (ctx.provide) this._provides.push(ctx.provide);\n      if (ctx.inject) ctx.inject.forEach(key => !this._injects.includes(key) && this._injects.push(key));\n    });\n\n    this.$data = _data;\n    extendObservable(this, this.$data);\n\n    extendObservable(this, generateComputed(_computed));\n\n    bindMethods(this, _methods);\n    const pMethods = {};\n    Object.getOwnPropertyNames(target.prototype)\n      .filter(key => ReactVueLike.prototype[key])\n      .map(key => isFunction(this[key]) && (pMethods[key] = this[key]));\n    bindMethods(this, pMethods);\n\n    bindWatch(this, _watch);\n\n    this.$emit('hook:created');\n    this.$emit('hook:beforeMount');\n  }\n\n  _resolveParent() {\n    iterativeParent(this, parent => this.$parent = parent, ReactVueLike);\n    this.$root = this.$parent ? this.$parent.$root : this;\n    if (this.$parent) this.$parent.$children.push(this);\n  }\n\n  _resolveInject() {\n    try {\n      const injects = this._injects;\n      const getProvides = vm => {\n        const provides = vm && vm._provides;\n        if (!provides || !provides.length) return;\n        let ret = {};\n        provides.forEach(p => Object.assign(ret, isFunction(p) ? p.call(vm) : p));\n        return ret;\n      };\n      if (injects.length) {\n        iterativeParent(this, vm => {\n          let _provide = getProvides(vm);\n          if (_provide) {\n            for (let i = injects.length - 1; i; i--) {\n              let key = injects[i];\n              let v = _provide[key];\n              if (v !== undefined) {\n                this.$set(this, key, v);\n                injects.splice(i, 1);\n              }\n            }\n          }\n          return !injects.length;\n        }, ReactVueLike);\n      }\n    } catch (e) {\n      handleError(e, this, 'resolveInject');\n      throw e;\n    }\n  }\n\n  _resolveDestory() {\n    if (this.$parent) {\n      const idx = this.$parent.$children.findIndex(c => c === this);\n      if (~idx) this.$parent.$children.splice(idx, 1);\n    }\n  }\n\n  async _callListener(eventName, handlers, args) {\n    try {\n      if (!handlers) return;\n      if (isFunction(handlers)) return await handlers.call(this, ...args);\n      let ret;\n      for (let handler of handlers) {\n        ret = await handler.call(this, ...args);\n      }\n      return ret;\n    } catch (e) {\n      handleError(e, this, `$emit:${eventName}`);\n      throw e;\n    }\n  }\n\n  static use(plugin, options = {}) {\n    if (!plugin.install) throw Error('ReactVueLike.use error: plugin need has \\'install\\' method!');\n    plugin.install(ReactVueLike, options);\n  }\n\n  static config(options = {}) {\n    Object.assign(config, options);\n  }\n\n  static props = {\n\n  }\n\n  static mixins = [];\n\n  static data(props) {\n    return {};\n  }\n\n  static provide() {\n\n  }\n\n  static inject = [];\n\n  static computed = {\n\n  }\n\n  static watch = {\n\n  }\n\n  static methods = {\n\n  }\n\n  beforeCreate(props = {}) {\n\n  }\n\n  created() {\n\n  }\n\n  beforeMount(props = {}) {\n\n  }\n\n  mounted() {\n\n  }\n\n  beforeUpdate() {\n  }\n\n  updated() {\n\n  }\n\n  beforeDestory() {\n\n  }\n\n  errorCaptured(err, vm, info) {\n\n  }\n\n  $nextTick(cb, ctx) {\n    this._ticks.push(ctx ? cb.bind(ctx) : cb);\n  }\n\n  $watch(expOrFn, callback, options = {}) {\n    if (!expOrFn || !callback) return;\n    callback = callback.bind(this);\n    if (typeof expOrFn === 'string') {\n      let { obj, key } = parseExpr(this, expOrFn);\n      if (obj && key)  {\n        return observe(\n          obj,\n          key,\n          change => callback(change.newValue, change.oldValue),\n          options.immediate\n        );\n      }\n    } else if (isFunction(expOrFn)) {\n      let oldValue;\n      return when(() => oldValue !== expOrFn(), callback);\n    }\n  }\n\n  $set(target, expr, value) {\n    let { obj, key } = parseExpr(target, expr);\n    if (obj && key) set(obj, key, value);\n  }\n\n  $delete(target, expr) {\n    let { obj, key } = parseExpr(target, expr);\n    if (obj && key) remove(obj, key);\n  }\n\n  $emit(eventName, ...payload) {\n    eventName = camelize(eventName);\n    return this._callListener(eventName, this.$listeners[eventName], payload);\n  }\n\n  $on(eventName, handler) {\n    eventName = camelize(eventName);\n    if (!this.$listeners[eventName]) this.$listeners[eventName] = [];\n    this.$listeners[eventName].push(handler.bind(this));\n  }\n\n  $off(eventName, handler) {\n    eventName = camelize(eventName);\n    if (handler) {\n      const handlers = this.$listeners[eventName];\n      if (handlers) {\n        const idx = handlers.findIndex(v => v === handler);\n        if (~idx) handlers.splice(idx, 1);\n      }\n      return;\n    }\n    delete this.$listeners[eventName];\n  }\n\n  $once(eventName, handler) {\n    eventName = camelize(eventName);\n    this.$listeners[eventName] = (...payload) => {\n      this.$off(eventName, handler);\n      return handler.call(this, ...payload);\n    };\n  }\n\n  render(...args) {\n    return this._renderFn && this._renderFn(...args);\n  }\n\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    this.$emit('hook:beforeUpdate');\n    return null;\n  }\n\n  componentDidMount() {\n    if (this._reactInternalFiber) {\n      this._resolveParent();\n      this._resolveInject();\n    }\n\n    this.$emit('hook:mounted');\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    this.$emit('hook:updated');\n\n    if (this._ticks.length) {\n      const ticks = this._ticks.slice();\n      this._ticks = [];\n      ticks.forEach(v => v());\n    }\n  }\n\n  componentWillUnmount() {\n    this.$emit('hook:beforeDestory');\n    this._resolveDestory();\n  }\n\n  componentDidCatch(error, info) {\n    this.$emit('hook:errorCaptured', error, this, info);\n  }\n}\n\nReactVueLike.Component = ReactVueLike;\n\nexport default ReactVueLike;\n"],"file":"component.js"}